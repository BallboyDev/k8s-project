# 쿠버네티스 기초 명령어 정리

- 쿠버네티스 모든 리소스 리스트
    - `kubectl api-resources`

- 기본 리소스 전체 조회
    - `kubectl get all`

- 리소스 조회
    - `kubectl get [pod | deployment | service | namespace | endpoints | configmap ...]`

- 리소스 상세 조회
    - `kubectl describe [리소스 종류] [리소스 이름]`

- 정의된 yaml 파일을 통해 리소스 생성 및 업데이트
    - `kubectl apply -f [파일명.yaml]`

- 리소스 삭제
    - `kubectl delete [deployment | service | configmap | secret ...] --all`

- 리소스 전체 삭제
    - 모든 디플로이먼트 삭제
        - `kubectl delete deploy --all`
    - 모든 서비스 삭제
        - `kubectl delete service --all`

- 파드 속 컨테이너 접근
    - `kubectl exec pod/[파드 이름] -- sh -c 'command'` / `kubectl exec pod/[파드 이름] -- command` 위 차이
        - `sh -c '...'` 방식
            - 쉘을 통해 간접 실행 방식
            - 비교적 효율성은 떨어지나 파이프, 리디레션, 여어 명령어 등의 쉘의 기능이 필요할 때 사용
        - `직접 실행 방식`
            - 쉘을 거치지 않고 쿠버네티스에서 리눅스 명령어를 실행
            - 쉘을 거치지 않기 때문에 효율성이 높고 복잡하지 않은 단일 명령어를 간단히 실행할 때 사용

    - 컨테이너 터미널 접근
        - `kubectl exec -it [파드 이름] -- sh`
        - `kubectl exec -it [파드 이름] -- /bin/bash`
    - 컨테이너 터미널 명령어 실행
        - `kubectl exec [파드 이름] -- sh -c 'ls -al /'`
        - `kubectl exec [파드 이름] -- sh -c 'printenv'`
    - 컨테이너 환경 변수 출력
        - `kubectl exec pod/[파드 이름] -- printenv`
    - 컨테이너 내부 명령어 실행
        - `kubectl exec pod/[파드 이름] -- sh -c 'command'`

- 컨피그맵 생성
    - 명령어로 컨피그맵 생성
        - `kubectl create configmap [configmap-name] --from-literal=[dataname]='value'`
    - 파일 기반으로 컨피그맵 생성 1
        - `kubectl create configmap [configmap-name] --from-env-file=[filepath]`
    - 파일 기반으로 컨피그맵 생성 2
        - `kubectl apply -f [파일명.yaml]`

- 파드 로그 출력
    - `kubectl logs [파드 이름]`

- 비밀값 생성
    - `kubectl create secret generic [secret-name] --from-literal=secret='value'`

- 비밀값 평문 확인
    - 인코딩 상태
        - `kubectl get secret [secret-name] -o jsonpath='{.data.secret}'`
    - 디코딩 상태
        - `kubectl get secret [secret-name] -o jsonpath='{.data.secret}' | base64 -d`
    - 비밀값 애너테이션에 저장된 내용 화인
        - `kubectl get secret [secret-name] -o jsonpath='{.metadata.annotations}'`

- 서비스 hostname 확인
    - `kubectl get service [service-name] -o jsonpath='{.status.loadBalancer.ingress[0]}'`

- 디프로이먼트 스케일링 변경
    - `kubectl scale --replicas=4 deploy/[deploy-name]`