## DaemonSet
- 디플로이먼트와 데몬셋은 둘 다 파드를 관리하는 쿠버네티스 리소스이지만 파드를 어떻게, 어디에 배치하는지에 대한 핵심 철학에서 근본적인 차이가 있다.
- 디플로이먼트는 클러스터 전체에 몇 개를 띄울지, 데몬셋은 각 노드에 하나씩 띄울지를 결정한다.

~~~yaml
apiVersion: apps/v1
kind: DaemonSet

metadata:
  name: daemonset-name

spec:
  selector: 
    matchLabels:                # 파드 정의 레이블 셀렉터
      app: pod-label-app
      version: pod-label-version

template: 
  metadata: 
    matchLabels:
      app: pod-label-app
      version: pod-label-version

  sepc:
    # 디플로이먼트와 같은 파드 정의
~~~

## Deployment vs DaemonSet
- 사용자의 요청을 처리하는 확장 가능한 애플리케이션을 배포하고 싶다면 `디플로이먼트`
- 모든 노드의 상태를 감시하거나 로그를 수집하는 에이전트를 배포하고 싶다면 `데몬셋`

### Deployment
- 사용자가 지정한 개수(replicas)의 똑같은 파드 복제본이 클러스터 내에서 항상 실행되도록 보장
- 스케줄링 방식
  - 쿠버네티스의 기본 스케줄러가 클러스터의 여러 노드들 중에서 리소스(CPU, 메모리 등)가 가장 여구 있는 최적의 노드를 알아서 선택하여 파드를 배치한다.
  - 디플로이먼트는 파드가 '어떤 특정 노드'에 실행되는지 신경쓰지 않는다. 단지 지정된 개수가 클러스터 어딘가에서 잘 실행되고 있기만 하면 된다.
  - 만약 특정 노드에 장애가 발생하면, 그 노드에서 실행되던 파드는 다른 건강한 노드에 자동으로 다시 생성된다.
- 용도
  - 상태 없는 웹 서버, API 서버, 마이크로 서비스 등 수평적으로 확장이 필요한 대부분의 애플리케이션에 사용된다.

### DameonSet
- 클러스터의 모든 노드(또는 특정 조건을 만족하는 노드들)에 단 하나의 파드 복제본이 실행되도록 보장하는 것
- 스케줄링 방식
  - 기본 스케줄러를 사용하지 않고, 데몬셋 컨트롤러가 직접 파드를 관리한다.
  - 클러스터에 새로운 노드가 추가되면, 데몬셋은 그 노드에도 자동으로 파드를 배포한다. 반대로 노드가 제거되면 해당 파드도 함꼐 제거된다.
  - nodeSelector나 affinity 설정을 통해 특정 레이블을 가진 노드들에만 파드를 배포하도록 제한할 수도 있다.
- 용도
  - 클러스터의 모든 노드에서 실행되어야 하는 시스템 레벨의 에이전트나 데몬에 사용된다.
    - 로그 수집기, 모니터링 에이전트, 네트워크 플러그인, 스토리지 데몬
